/* CSS Custom Properties for Theming */
:root {
    /* Light Theme (Default) */
    --theme-bg-color: #FFFFFF;
    --theme-text-color: #212529;
    --theme-accent-color: #080808;
    --theme-accent-hover-color: #008c7a;
    --theme-card-bg-color: #F8F9FA; /* Light gray for cards */
    --theme-border-color: #DEE2E6; /* Light border color */
    --theme-form-bg-color: #FFFFFF;
    --theme-form-text-color: #212529;
    --theme-form-border-color: #CED4DA;
    --theme-form-focus-border-color: #00BFA5;
    --theme-form-focus-shadow-color: rgba(0, 191, 165, 0.25);
    --theme-header-bg-color: #FFFFFF; /* Light header */
    --theme-header-text-color: #212529;
    --theme-footer-bg-color: #343a40;       /* Dark footer background */
    --theme-footer-text-color: #FFFFFF;     /* White footer text */
    --theme-footer-icon-fill: #FFFFFF;      /* White footer icons */
    --theme-subtle-overlay-color: rgba(0, 0, 0, 0.5); /* For things like banner text background */
    --theme-code-bg-color: #e9ecef;
    --theme-code-text-color: #212529;
    --theme-caret-color: #212529; /* For typing animation cursor */
}

/* Ensure footer h2 title is white in light theme with new dark footer BG */
:root footer #contact h2 {
    color: #FFFFFF;
}

.theme-dark {
    --theme-bg-color: #000000;                        /* Black page background */
    --theme-text-color: #FFFFFF;                      /* White text */

    --theme-accent-color: #FFFFFF;                    /* White accent */
    --theme-accent-hover-color: #DDDDDD;              /* Light grey for accent hover */

    --theme-card-bg-color: #181818;                   /* Very dark grey for cards */
    --theme-border-color: #333333;                    /* Dark grey borders for cards/elements */

    --theme-form-bg-color: #101010;                   /* Dark background for forms */
    --theme-form-text-color: #FFFFFF;                 /* White text in forms */
    --theme-form-border-color: #333333;               /* Dark grey border for form fields */
    --theme-form-focus-border-color: #FFFFFF;         /* White border on focus for forms */
    --theme-form-focus-shadow-color: rgba(255, 255, 255, 0.25); /* White shadow on focus */

    --theme-header-bg-color: #080808;                 /* Slightly off-black for header */
    --theme-header-text-color: #FFFFFF;               /* White text in header */

    --theme-footer-bg-color: #080808;                 /* Slightly off-black for footer */
    --theme-footer-text-color: #AAAAAA;               /* Lighter grey for footer text */
    --theme-footer-icon-fill: #AAAAAA;                /* Lighter grey for footer icons */

    --theme-subtle-overlay-color: rgba(255, 255, 255, 0.05); /* Very subtle light overlay for dark elements on dark */

    --theme-code-bg-color: #1E1E1E;                   /* Dark grey for code blocks */
    --theme-code-text-color: #FFFFFF;                 /* White text for code */

    --theme-caret-color: #FFFFFF;                     /* White caret for typing animations */
}

/* Basic Reset */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px; /* Base font size */
    scroll-behavior: smooth;
}

/* Updated body to use CSS variables */
body.grotem-body {
    font-family: 'Montserrat', 'Inter', 'Roboto', sans-serif;
    line-height: 1.6;
    background-color: var(--theme-bg-color);
    color: var(--theme-text-color);
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Headings */
body.grotem-body h1,
body.grotem-body h2,
body.grotem-body h3,
body.grotem-body h4,
body.grotem-body h5,
body.grotem-body h6 {
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 0.75rem;
    color: var(--theme-text-color); /* Updated to use variable */
}

h1 {
    font-size: 2.5rem;
}

h2 {
    font-size: 2rem;
}

h3 {
    font-size: 1.75rem;
}

h4 {
    font-size: 1.5rem;
}

h5 {
    font-size: 1.25rem;
}

h6 {
    font-size: 1rem;
}

p {
    margin-bottom: 1rem;
    color: var(--theme-text-color); /* Ensure paragraphs also use theme text color */
}

body.grotem-body a {
    color: var(--theme-accent-color);
    text-decoration: none;
}

body.grotem-body a:hover {
    text-decoration: none;
    color: var(--theme-accent-hover-color);
}

/* Basic Container - No color changes needed here */
.container {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}

@media (min-width: 576px) {
    .container {
        max-width: 540px;
    }
}

@media (min-width: 768px) {
    .container {
        max-width: 720px;
    }
}

@media (min-width: 992px) {
    .container {
        max-width: 960px;
    }
}

@media (min-width: 1200px) {
    .container {
        max-width: 1140px;
    }
}

/* Renamed .dark-card to .content-card and using variables */
.content-card {
    background-color: var(--theme-card-bg-color);
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    border: 1px solid var(--theme-border-color);
    color: var(--theme-text-color);
}

/* Buttons updated to use variables */
.btn-grotem-primary {
    background-color: var(--theme-accent-color);
    color: var(--theme-bg-color); /* Contrasting text color */
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    text-decoration: none;
    display: inline-block;
    font-weight: 500;
    border: 1px solid var(--theme-accent-color);
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

.btn-grotem-primary:hover {
    background-color: var(--theme-accent-hover-color);
    border-color: var(--theme-accent-hover-color);
    color: var(--theme-bg-color); /* Contrasting text color */
    text-decoration: none;
}

.btn-grotem-secondary {
    background-color: transparent;
    color: var(--theme-accent-color);
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    text-decoration: none;
    display: inline-block;
    font-weight: 500;
    border: 1px solid var(--theme-accent-color);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

.btn-grotem-secondary:hover {
    background-color: var(--theme-accent-color);
    color: var(--theme-bg-color); /* Contrasting text color */
    text-decoration: none;
}

/* Forms updated to use variables */
body.grotem-body .form-control {
    background-color: var(--theme-form-bg-color);
    color: var(--theme-form-text-color);
    border: 1px solid var(--theme-form-border-color);
    border-radius: 4px;
}

body.grotem-body .form-control:focus {
    background-color: var(--theme-form-bg-color); /* Or slightly different shade if desired */
    color: var(--theme-form-text-color);
    border-color: var(--theme-form-focus-border-color);
    box-shadow: 0 0 0 0.2rem var(--theme-form-focus-shadow-color);
}

body.grotem-body label {
    color: var(--theme-text-color);
}

/* Header/Navbar Styling updated to use variables */
body.grotem-body header.bg-gray-800 {
    background-color: var(--theme-header-bg-color) !important;
    color: var(--theme-header-text-color) !important;
}

body.grotem-body header.bg-gray-800 a.navbar-brand,
body.grotem-body header.bg-gray-800 nav a {
    color: var(--theme-header-text-color);
}

body.grotem-body header.bg-gray-800 nav a:hover,
body.grotem-body header.bg-gray-800 a.navbar-brand:hover {
    color: var(--theme-accent-color);
}

/* Footer Styling updated to use variables */
body.grotem-body footer.bg-gray-800 {
    background-color: var(--theme-footer-bg-color) !important;
    color: var(--theme-footer-text-color) !important;
}

body.grotem-body footer section.bg-gray-800 .social-links a svg {
    fill: var(--theme-footer-icon-fill);
}

body.grotem-body footer section.bg-gray-800 .social-links a:hover svg {
    fill: var(--theme-accent-color);
}

/* This rule might also need adjustment if it refers to the same footer structure, but the task only specified the one above for icon fill.
   For now, only changing what was explicitly requested.
   If text-muted is inside the section, it would be:
   body.grotem-body footer section.text-muted
   But if it's on the footer tag itself, it remains.
   The current footer structure is <footer class="border-top footer text-muted"> <section id="contact" class="py-16 bg-gray-800">
   So, footer.text-muted is correct as it is.
*/
body.grotem-body footer.text-muted {
    color: var(--theme-footer-text-color) !important;
}

/* Specific component styles updated to use variables */
body.grotem-body .service-card {
    background-color: var(--theme-card-bg-color);
    border: 1px solid var(--theme-border-color);
    color: var(--theme-text-color);
    background-image: none !important;
}

body.grotem-body .service-card::before {
    /* Using currentColor with opacity for the icon */
    color: currentColor;
    opacity: 0.1; /* Adjust as needed for subtlety */
    background-color: transparent;
    /* Ensure other properties from original site2.css like position, font-family are still in effect or added if needed */
}

body.grotem-body .service-card h3,
body.grotem-body .service-card p {
    color: var(--theme-text-color);
}

/* Service Details Popup (on hover) - Base styles */
.service-details {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: var(--theme-card-bg-color); /* Default background */
    border-top: 1px solid var(--theme-border-color);
    color: var(--theme-text-color); /* Default text color */
    padding: 1rem;
    transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    height: 100%;
    overflow-y: auto;
    transform: translateY(100%);
    opacity: 0;
    z-index: 1;
}

.service-card:hover .service-details {
    transform: translateY(0);
    opacity: 1;
}

/* Explicitly set text colors for elements within .service-details */
.service-details h4,
.service-details p,
.service-details ul,
.service-details li {
    color: var(--theme-text-color); /* Ensures text color is from the current theme */
}

.service-details a {
    color: var(--theme-accent-color);
}
.service-details a:hover {
    color: var(--theme-accent-hover-color);
}

/* Readability Fix: Force specific colors for .service-details in light theme */
body:not(.theme-dark) .service-details {
    background-color: #FFFFFF; /* Force a very light background for light theme */
    border-top: 1px solid var(--theme-border-color, #DEE2E6); /* Ensure border uses light theme var */
    color: #212529; /* Force dark text for light theme */
}

body:not(.theme-dark) .service-details h4,
body:not(.theme-dark) .service-details p,
body:not(.theme-dark) .service-details ul,
body:not(.theme-dark) .service-details li {
    color: #212529 !important; /* Force dark text, overriding potential Tailwind classes */
}

body:not(.theme-dark) .service-details a {
    color: var(--theme-accent-color, #00BFA5) !important; /* Force accent color for links */
}
body:not(.theme-dark) .service-details a:hover {
    color: var(--theme-accent-hover-color, #008c7a) !important;
}


/* Typing animation container */
body.grotem-body .typing-container {
    border-right-color: var(--theme-caret-color); /* Cursor color */
}

@keyframes caret {
    from, to { border-color: transparent; }
    50% { border-color: var(--theme-caret-color); }
}

/* Banner text adjustments */
body.grotem-body #banner .bg-black.bg-opacity-50 {
    background-color: var(--theme-subtle-overlay-color);
}

body.grotem-body #banner h2,
body.grotem-body #banner p {
    color: #FFFFFF; /* Explicitly white for max contrast on banners */
}

/* Add any other specific component styles here, refactoring to use variables */
/* For example, if there are styles for code blocks, tables, etc. */
pre, code {
    background-color: var(--theme-code-bg-color);
    color: var(--theme-code-text-color);
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
pre {
    padding: 1em;
    overflow: auto;
}

/* Theme Switcher Button */
#themeSwitcherButton {
    background-color: var(--theme-card-bg-color); /* Use card background for some contrast */
    color: var(--theme-text-color);
    border: 1px solid var(--theme-border-color);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    transition: background-color 0.3s ease, color 0.3s ease;
}

#themeSwitcherButton:hover {
    background-color: var(--theme-accent-color);
    color: var(--theme-bg-color); /* Text color that contrasts with accent */
    border-color: var(--theme-accent-color);
}

/* Adjustments for header context if needed - the button is placed inside a nav */
/* This ensures it uses themed properties even if nav has hardcoded Tailwind colors */
header nav #themeSwitcherButton {
     background-color: var(--theme-header-bg-color);
     color: var(--theme-header-text-color);
     border: 1px solid var(--theme-accent-color); /* Give it an accent border in header */
}
header nav #themeSwitcherButton:hover {
    background-color: var(--theme-accent-color);
    color: var(--theme-header-bg-color); /* Or a color that contrasts well with accent */
}

/* --- Refinements for ru.cshtml and en.cshtml --- */

/* General Section Styling */
section {
    padding-top: 3rem; /* Consistent top/bottom padding for sections */
    padding-bottom: 3rem;
}

/* Override Tailwind's default container padding if needed, or ensure our .container is used consistently */
/* .container class from base style should handle max-width and centering. */

/* Banner Section */
#banner {
    min-height: 100vh; /* Adjust as needed */
    height: 100vh;
    display: flex; /* For centering content */
    align-items: center;
    justify-content: center;
    background-size: cover;
    background-position: center;
    position: relative; /* For overlay */
    transition: height 0.5s ease-in-out, min-height 0.5s ease-in-out; /* Added transition */
}
#banner .bg-black.bg-opacity-50 { /* This is the overlay div */
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    background-color: var(--theme-subtle-overlay-color);
}
#banner h2, #banner p { /* Ensure text on banner is always light for contrast */
    color: #FFFFFF;
}
#banner h2 {
    font-size: 2.5rem; /* Example size */
    font-weight: 700;
    margin-bottom: 1rem;
}
#banner p {
    font-size: 1.2rem;
}

/* Home Section (Welcome Text & Typing Animation) */
#home, #section-2 { /* section-2 seems similar to home */
    text-align: center;
}
#home h1, #home h2, #section-2 h1, #section-2 h2 {
    color: var(--theme-text-color);
    margin-bottom: 1rem;
}
#home .typing-container, #section-2 .typing-container {
    font-size: 1.5rem; /* Adjust typing text size */
    color: var(--theme-accent-color); /* Make typing text accent color */
    display: inline-block; /* Ensure proper layout */
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 0.5rem;
    min-height: 2.5em; /* Ensure space for text */
}
/* Ensure caret animation uses theme variable (already done in previous step) */

/* Services Section (#services) */
#services h2.text-center { /* Assuming h2 is used for section title */
    margin-bottom: 2rem;
    font-size: 2.25rem;
    color: var(--theme-text-color);
}

/* Service Card Refinements */
.service-card { /* Target the existing class used in ru.cshtml and en.cshtml */
    background-color: var(--theme-card-bg-color);
    color: var(--theme-text-color);
    border: 1px solid var(--theme-border-color);
    border-radius: 8px; /* Consistent border radius */
    padding: 1.5rem;
    margin-bottom: 1.5rem; /* Consistent margin */
    box-shadow: 0 4px 12px rgba(0,0,0,0.05); /* Subtle shadow, more visible in light theme */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%; /* For consistent card height in a row if using flexbox for layout */
    display: flex;
    flex-direction: column;
    position: relative; /* For service-details positioning */
    overflow: hidden; /* To contain service-details */
}

.theme-dark .service-card {
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* Darker shadow for dark theme */
}

.service-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}
.theme-dark .service-card:hover {
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

.service-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--theme-text-color);
    margin-bottom: 0.75rem;
}

.service-card p { /* Main description paragraph */
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 1rem;
    flex-grow: 1; /* Allow p to grow to push details down or manage space */
}

/* Service Card Icons (using ::before from site2.css) */
.service-card::before {
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    font-size: 2rem;
    color: var(--theme-accent-color);
    opacity: 0.7;
    z-index: 0;
    display: inline-block;
    content: attr(data-icon);
}


/* Outsource Section (#outsorce on ru.cshtml) & Consulting (#consulting) */
#outsorce, #consulting {
    /* General styling for these text-heavy sections */
}
#outsorce h2, #consulting h2 { /* Section titles */
    margin-bottom: 2rem;
    font-size: 2.25rem;
    color: var(--theme-text-color);
    text-align: center;
}
#outsorce section, #consulting section { /* Sub-sections within outsource/consulting */
    padding-top: 1rem; /* Less padding for nested sections */
    padding-bottom: 1rem;
}
#outsorce .bg-gray-800, #consulting .bg-gray-800 { /* Targeting existing Tailwind classes */
    background-color: var(--theme-card-bg-color) !important; /* Use card bg */
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    border: 1px solid var(--theme-border-color);
}
#outsorce h3, #outsorce h4, #consulting h3, #consulting h4 { /* Sub-headings within these sections */
    color: var(--theme-accent-color);
    margin-bottom: 0.75rem;
}
#outsorce ul, #consulting ul {
    list-style: disc;
    list-style-position: inside;
    padding-left: 1rem;
    margin-bottom: 1rem;
}
#outsorce li, #consulting li {
    margin-bottom: 0.5rem;
}

/* About Us Section (#about) */
#about h2.text-center {
    margin-bottom: 1rem;
    font-size: 2.25rem;
    color: var(--theme-text-color);
}
#about p.text-lg.text-center { /* Main description */
    margin-bottom: 2rem;
    font-size: 1.1rem; /* Slightly larger for emphasis */
    color: var(--theme-text-color);
}
#about h3.text-2xl { /* "Наши Преимущества" */
    margin-bottom: 1.5rem;
    font-size: 1.75rem;
    color: var(--theme-text-color);
}
#about .bg-gray-700 { /* Cards for advantages */
    background-color: var(--theme-card-bg-color) !important;
    color: var(--theme-text-color);
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1rem; /* Ensure spacing if they stack on mobile */
    border: 1px solid var(--theme-border-color);
    height: 100%; /* For consistent height */
}
#about .bg-gray-700 h4 {
    color: var(--theme-accent-color);
    font-size: 1.25rem;
}

/* Social Panel (Alpine.js component in ru.cshtml) */
.social-panel-fixed-button {
    
    border-radius: 50% 0 0 50%; /* Style as a tab */
    padding: 0.5rem !important; /* Adjust padding */
    writing-mode: vertical-rl;
    transform: translateY(-50%) rotate(0deg); /* Reset rotation if not needed */
    right: 0px; /* Attach to right edge */
    top: 70%; /* Adjust vertical position */
    /* Remove pulse animation for now, or restyle it */
}
.social-panel-fixed-button .social-panel-pulse-wrapper,
.social-panel-fixed-button .social-panel-pulse-text {
    animation: none; /* Disable pulse for now for wrapper and text */
    transform: none; /* Reset transforms for wrapper and text */
    /* width: auto; height: auto; background: none; -- Keep this for wrapper and text if they don't need specific dimensions/bg */
}

.social-panel-fixed-button .social-panel-pulse-circle {
    width: 60px;
    height: 60px;
    background-color: rgba(255, 69, 0, 0.5); /* Semi-transparent OrangeRed */
    border-radius: 50%;
    position: absolute;
    z-index: 0; /* Behind the icon/text */
    /* Centering is handled by the flex wrapper: social-panel-pulse-wrapper */
    animation: social-panel-pulse 1.5s infinite ease-in-out;
}

.social-panel-fixed-button svg {
    fill: var(--theme-bg-color); /* Icon color to contrast with accent */
    position: relative; /* Ensure SVG (inside pulse-text or direct child) is above the circle */
    z-index: 1;
    width: 24px; height: 24px;
}

.social-panel-popup {
    background-color: rgba(255, 69, 0, 0.5);
    border: 1px solid var(--theme-border-color) !important;
    border-radius: 8px;
    padding: 1rem !important;
    gap: 1rem !important;
    right: 60px; /* Position next to button */
    top: 70%;
    transform: translateY(-50%);
}
.social-panel-icon-link svg {
    fill: var(--theme-text-color) !important; /* Themed icon color */
    width: 30px; height: 30px;
}
.social-panel-icon-link:hover svg {
    fill: var(--theme-accent-color) !important;
}

/* Remove conflicting Tailwind color classes if `!important` is not enough or for cleanup */
/* e.g. .text-white, .text-gray-100, .bg-gray-700, .bg-gray-800 when used on elements */
/* that should now be controlled by the theme variables. This part is context-dependent */
/* and hard to specify without seeing the rendered page with new CSS. */

/* Example of removing a conflicting Tailwind class effect if it was on body */
body.grotem-body.bg-gray-900 {
    background-color: var(--theme-bg-color) !important;
}
body.grotem-body.text-gray-100 {
    color: var(--theme-text-color) !important;
}

/* Styles for Index.cshtml (Language Selector Page) */

/* Ensure .content on Index.cshtml is centered and uses theme colors */
.page-index-content { /* Add this class to the main div in Index.cshtml if not already targetable */
    text-align: center;
    padding-top: 3rem;
    padding-bottom: 3rem;
}

.page-index-content .display-4 { /* Main IOmniEYE title */
    font-size: 3rem; /* Adjust size as needed */
    font-weight: 700;
    color: var(--theme-text-color);
    margin-bottom: 1.5rem;
    background-color: transparent !important; /* Remove previous background from site.css */
}

.page-index-content .main-text {
    font-size: 1.5rem;
    color: var(--theme-text-color);
    margin-bottom: 2rem;
    background-color: transparent !important; /* Remove previous background from site.css */
}

.page-index-content .changing-text { /* The spans that get dynamically updated */
    color: var(--theme-accent-color);
    font-weight: 600;
}

/* Language Buttons */
.language-buttons {
    display: flex;
    gap: 1.5rem; /* Increased gap */
    justify-content: center;
    margin-top: 2rem;
    margin-bottom: 3rem;
}

.language-button { /* This class is on the buttons on Index.cshtml */
    /* Apply btn-grotem-primary styles */
    background-color: var(--theme-accent-color);
    color: var(--theme-bg-color); /* Text color that contrasts with accent */
    padding: 0.75rem 2rem; /* Larger padding */
    border-radius: 8px; /* More rounded */
    text-decoration: none;
    display: inline-block;
    font-weight: 600; /* Bolder text */
    font-size: 1.1rem; /* Larger font */
    border: 1px solid var(--theme-accent-color);
    transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.theme-dark .language-button { /* Ensure text color contrasts in dark mode */
     color: #FFFFFF; /* Or a very light gray if accent is dark */
}


.language-button:hover {
    background-color: var(--theme-accent-hover-color);
    border-color: var(--theme-accent-hover-color);
    transform: translateY(-2px); /* Slight lift on hover */
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
     color: var(--theme-bg-color); /* Ensure text color remains correct on hover */
}
 .theme-dark .language-button:hover {
     color: #FFFFFF;
 }


/* Tag Cloud */

.tag-cloud {
    text-align: center;
    color: white;
    margin-top: 2%;
    font-size:26px;
}

.cashtag {
    color: rgba(0, 0, 0, 0);
    font-size: 50px;
}

.border-top {
    margin-bottom: 0px;
}

.tag-cloud span {
    display: inline-block; /* Элементы будут в строке, но сохранят блочную структуру */
    padding: 5px 10px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 5px;
    cursor: pointer;
    transition: transform 0.2s, background-color 0.2s;
    margin: 3px; /* Отступ между элементами */
}

    .tag-cloud span:hover {
        transform: scale(1.1);
        background-color: rgba(128, 0, 0, 0.6);
    }

/* Style for the theme switcher button in the simple _Layout.cshtml header */
/* This is basic; can be refined if the header structure becomes more complex */
#_LayoutSimpleHeader { /* Assuming we wrap the button in a div with this ID for styling */
    text-align: right;
    padding: 1rem;
    border-bottom: 1px solid var(--theme-border-color);
}

/* Styles for Support.cshtml (Form Page) */

/* General page structure */
.page-support-content { /* Add this class to a wrapper div in Support.cshtml if needed */
    max-width: 700px; /* Max width for the form container */
    margin: 2rem auto; /* Center it with some top/bottom margin */
    padding: 2rem;
    background-color: var(--theme-card-bg-color);
    border-radius: 8px;
    border: 1px solid var(--theme-border-color);
}
.theme-dark .page-support-content {
     box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
.theme-light .page-support-content {
     box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}


.page-support-content h4 { /* Page title "Техническая поддержка. Форма заявки" */
    text-align: center;
    font-size: 1.75rem;
    color: var(--theme-text-color);
    margin-bottom: 2rem;
}

/* Form elements are largely covered by existing .form-control styles in grotem_style.css */
/* Ensure labels, inputs, textareas use theme variables. */
.page-support-content .form-group {
    margin-bottom: 1.5rem;
}

.page-support-content .form-control { /* Specificity for support page if needed */
    background-color: var(--theme-form-bg-color);
    color: var(--theme-form-text-color);
    border: 1px solid var(--theme-form-border-color);
    padding: 0.75rem; /* Ensure decent padding */
}
.page-support-content .form-control:focus {
    border-color: var(--theme-form-focus-border-color);
    box-shadow: 0 0 0 0.2rem var(--theme-form-focus-shadow-color);
}
 .page-support-content label {
    display: block; /* Make labels block for better spacing */
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--theme-text-color);
}

.page-support-content .btn-primary { /* Submit button */
    /* Apply .btn-grotem-primary styles */
    background-color: var(--theme-accent-color);
    color: var(--theme-bg-color);
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    text-decoration: none;
    display: inline-block;
    font-weight: 500;
    border: 1px solid var(--theme-accent-color);
    transition: background-color 0.3s ease, border-color 0.3s ease;
    width: 100%; /* Make button full width */
    font-size: 1.1rem;
}
.theme-dark .page-support-content .btn-primary {
    background-color: rgba(141, 2, 31, 0.8) !important; /* Bordeaux with 80% opacity */
    color: #FFFFFF !important; /* White text */
    border-color: #8D021F !important; /* Opaque Bordeaux border */

    /* Carry over layout properties from .page-support-content .btn-primary if not overridden by .btn or .btn-primary defaults */
    padding: 0.75rem 1.5rem; /* From general .page-support-content .btn-primary */
    border-width: 1px;       /* Explicitly set */
    border-style: solid;     /* Explicitly set */
    border-radius: 6px;      /* From general .page-support-content .btn-primary */
    width: 100%;             /* From general .page-support-content .btn-primary */
    font-size: 1.1rem;       /* From general .page-support-content .btn-primary */
    text-decoration: none;   /* From general .btn-grotem-primary, good default */
    display: inline-block;   /* From general .btn-grotem-primary, good default */
    font-weight: 500;        /* From general .btn-grotem-primary, good default */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease; /* Standard transition */
}

.theme-dark .page-support-content .btn-primary:hover,
.theme-dark .page-support-content .btn-primary:focus {
    background-color: rgba(141, 2, 31, 0.95) !important; /* More opaque Bordeaux on hover/focus */
    color: #FFFFFF !important;
    border-color: #700118 !important; /* Slightly darker opaque Bordeaux for border */
    outline: none; /* Remove default focus outline if any */
}

.page-support-content .btn-primary:hover {
    background-color: var(--theme-accent-hover-color);
    border-color: var(--theme-accent-hover-color);
    color: var(--theme-bg-color);
}
.theme-dark .page-support-content .btn-primary:hover {
    color: #FFFFFF;
}


/* Validation Tooltips (from site.css) */
.tooltip-wrapper {
    position: relative;
    display: block; /* Make it block to contain form elements properly */
}

.tooltip-popup {
    position: absolute;
    background-color: var(--theme-accent-color); /* Use accent for error indication */
    color: #FFFFFF; /* White text on accent */
    padding: 0.5rem 0.75rem;
    border-radius: 4px;
    font-size: 0.85rem;
    white-space: nowrap;
    z-index: 100;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    opacity: 0;
    visibility: hidden;
    transform: translateY(5px);
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
    bottom: 100%; /* Position above the input */
    left: 0;
    margin-bottom: 5px; /* Space from input */
}
.tooltip-wrapper.show-tooltip .tooltip-popup {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
.tooltip-popup::after { /* Triangle for tooltip */
    content: '';
    position: absolute;
    top: 100%;
    left: 15px;
    border-width: 5px;
    border-style: solid;
    border-color: var(--theme-accent-color) transparent transparent transparent;
}

/* "Back to home" button (.back-to-home from site.css) */
.back-to-home {
    position: fixed;
    top: 20px; /* Position to top left */
    left: -80px; /* Initially hidden */
    transform: none; /* Reset transform from site.css */
    display: flex;
    align-items: center;
    text-decoration: none;
    transition: left 0.4s ease;
    z-index: 999;
    background-color: var(--theme-card-bg-color);
    padding: 0.5rem;
    border-radius: 0 50px 50px 0; /* Rounded tab shape */
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
}
.theme-dark .back-to-home {
    box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
}

.back-to-home:hover {
    left: 0; /* Slide in */
}

.back-circle { /* The circle part of the button */
    width: 40px; /* Smaller */
    height: 40px;
    min-width: 40px;
    background-color: var(--theme-accent-color);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: none; /* Remove previous shadow */
    animation: none; /* Remove previous pulse */
    backdrop-filter: none;
}

.back-to-home .arrow {
    font-size: 24px; /* Adjust arrow size */
    font-weight: bold;
    color: var(--theme-bg-color); /* Contrast with accent */
    opacity: 1;
    animation: none; /* Remove rotation animation */
    transform: none;
    position: static; /* Reset absolute positioning */
}
/* Hide extra arrows if they were part of the old animation */
.back-to-home .arrow.a2, .back-to-home .arrow.a3 {
    display: none;
}
.back-to-home .arrow.a1 {
    display: inline;
}


.back-label {
    margin-left: 10px;
    white-space: nowrap;
    font-weight: 500;
    color: var(--theme-text-color);
    opacity: 0;
    transition: opacity 0.3s ease 0.1s; /* Delayed opacity transition */
    font-size: 1rem;
}
.back-to-home:hover .back-label {
    opacity: 1;
}

/* Success Popup Message */
.popup-message { /* Class from _Layout4.cshtml */
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--theme-accent-color); /* Use accent for success */
    color: #FFFFFF; /* White text */
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    font-size: 1rem;
    z-index: 9999;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s ease, transform 0.4s ease, visibility 0.4s ease;
    visibility: hidden; /* Start hidden */
}
.popup-message.show {
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
}

/* --- Responsive Refinements --- */

@media (max-width: 991px) { /* Tablets and below */
    /* Adjust container padding for more space if needed */
    .container {
        padding-right: 20px;
        padding-left: 20px;
    }

    /* Example: Header Navigation - if nav links are too crowded */
    /* This assumes a simple nav structure. Complex navs might need JS for a hamburger menu. */
    header nav a, header nav #themeSwitcherButton {
        font-size: 0.85rem; /* Slightly smaller text in nav */
        margin-left: 0.5rem !important; /* Adjust spacing */
        margin-right: 0.5rem !important;
    }
     header nav #themeSwitcherButton {
        padding: 0.4rem 0.8rem; /* Smaller button */
    }


    /* Service cards - ensure they stack nicely */
    /* If they are in a flex container, ensure flex-wrap: wrap is set */
    /* If in a grid, adjust grid-template-columns */
    /* For now, just ensure min-width if they are inline-block or similar */
    .service-card {
        min-width: 80%; /* Or width: 100% if they should stack */
        margin-left: auto;
        margin-right: auto;
    }

    #services .flex-wrap > div[class*="sm:w-1/2"], /* Targeting Tailwind columns */
    #services .flex-wrap > div[class*="md:w-1/3"] {
        width: 100% !important; /* Force stack on smaller screens */
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
    }
     #about .flex-wrap > div[class*="sm:w-1/2"],
     #about .flex-wrap > div[class*="md:w-1/3"] {
         width: 100% !important;
         padding-left: 0.5rem !important;
         padding-right: 0.5rem !important;
     }


    .page-index-content .display-4 { font-size: 2.5rem; }
    .page-index-content .main-text { font-size: 1.25rem; }
    .language-button { font-size: 1rem; padding: 0.6rem 1.5rem; }

    .page-support-content {
        margin: 1rem;
        padding: 1.5rem;
    }
    .page-support-content h4 { font-size: 1.5rem; }
}

@media (max-width: 767px) { /* Mobile phones */
    html {
        font-size: 15px; /* Slightly reduce base font for mobile */
    }
    h1 { font-size: 2rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.5rem; }

    /* #banner h2 { font-size: 2rem; } */
    /* #banner p { font-size: 1.1rem; } */

    #banner {
        height: auto !important;
        min-height: 0 !important;
        padding-top: 5rem !important;
        padding-bottom: 3rem !important;
    }

    #banner .bg-black.bg-opacity-50 {
        padding: 1.5rem !important;
    }

    #banner h2, #banner #banner-text {
        font-size: 1.8rem !important;
        margin-bottom: 0.5rem !important;
    }
    #banner p, #banner #banner-subtext {
        font-size: 1rem !important;
        margin-bottom: 1rem !important;
    }

    #home {
        padding-top: 3rem !important;
        padding-bottom: 2rem; /* Retained from previous version seen in Turn 14's output */
    }

    /* Further reduce nav item size or implement hamburger menu (latter needs JS) */
    header nav a, header nav #themeSwitcherButton {
        /* If a hamburger menu isn't implemented, links might need to wrap or be very small */
        margin-bottom: 0.5rem; /* Add some space below items when they wrap */
    }

    /* Added styles for header navigation overflow */
    header.bg-gray-800 nav {
        flex-wrap: wrap;
        justify-content: center; /* Or flex-start, depending on desired alignment */
    }

    header.bg-gray-800 nav a,
    header.bg-gray-800 nav button,
    header.bg-gray-800 nav div#headerLanguageSwitcher { /* Assuming headerLanguageSwitcher is an ID, if it's a class use . */
        margin-bottom: 0.5rem; /* Add some space below items when they wrap */
    }
    /* End of added styles for header navigation overflow */

    .social-panel-fixed-button {
        /* May need to adjust position or size for mobile */
        top: 85%;
        padding: 0.4rem !important;
    }
    .social-panel-fixed-button svg {
        width: 20px; height: 20px;
    }
    .social-panel-popup {
        right: 50px; /* Adjust to prevent overlap */
        top: 85%;
    }
}
@media (max-width: 580px) {
    #banner {
        /* min-height: 50vh; */ /* Effectively overridden by auto height from 767px rule if not specified here */
        padding-top: 5rem !important;
        padding-bottom: 5rem !important;
    }
}

    @media (max-width: 480px) {
        #banner {
            /* min-height: 50vh; */ /* Effectively overridden by auto height from 767px rule if not specified here */
            padding-top: 8rem !important;
            padding-bottom: 2rem !important;
        }

            #banner .bg-black.bg-opacity-50 {
                padding: 1rem !important;
            }

            #banner h2, #banner #banner-text {
                font-size: 1.5rem !important;
                margin-bottom: 0.5rem !important;
            }

            #banner p, #banner #banner-subtext {
                font-size: 0.9rem !important;
                margin-bottom: 0.8rem !important;
            }

        #home h2 { /* Welcome to */
            font-size: 1.25rem;
        }

        #home h1 { /* IOmniEYE */
            font-size: 2rem;
        }

        #home .typing-container {
            font-size: 1rem;
            min-height: 2em;
        }

        #home p.mt-4.text-lg { /* Initial text below typing */
            font-size: 0.9rem;
        }

        #home {
            padding-top: 2rem !important;
        }
    }

    /* General Polish */
    /* body.grotem-body is already smoothed from global html or body rule, this is redundant if so */

    /* Ensure images are responsive by default if not already handled by Bootstrap/Tailwind */
    img {
        max-width: 100%;
        height: auto;
        display: block; /* Removes bottom space under images */
    }

    /* Consistent focus outline for accessibility, using theme variables */
    *:focus-visible {
        outline: 2px solid var(--theme-accent-color);
        outline-offset: 2px;
        box-shadow: 0 0 0 4px var(--theme-bg-color), 0 0 0 6px var(--theme-accent-color); /* More prominent */
    }
    /* For browsers not supporting focus-visible, provide a fallback (optional) */
    /* *:focus { ... } */


    /* Remove default outline when focus-visible is supported */
    *:focus:not(:focus-visible) {
        outline: none;
    }

    /* Clean up hover effects on header nav links that might have old Tailwind classes */
    header.bg-gray-800 nav a.hover\:text-burgundy:hover { /* Target specific Tailwind class */
        color: var(--theme-accent-color) !important; /* Override with theme accent */
    }

    /* --- Footer Social Icon Sizing Correction for _Layout.cshtml context --- */

    /*
       The footer in _Layout.cshtml has a structure like:
       <footer class="border-top footer text-muted">
           <section id="contact" class="py-16 bg-gray-800"> <!-- This bg-gray-800 is now themed -->
               <div class="container mx-auto text-center">
                   <h2 class="text-3xl font-bold">Follow &amp; Contact Us</h2>
                   <div class="social-links mt-7">
                       <a href="..." target="_blank" aria-label="...">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">...</svg>
                       </a>
                       ...
                   </div>
               </div>
           </section>
       </footer>
       The 'fill="white"' will be overridden by theme variable '--theme-footer-icon-fill'.
    */

    /* General styling for social links in any footer to ensure consistency */
    footer .social-links {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem; /* Spacing between icons */
        margin-top: 1rem; /* Space from "Follow & Contact Us" title */
    }

        footer .social-links a {
            display: inline-block; /* Needed for width/height to take effect on <a> if not already */
            line-height: 0; /* Prevents extra space if SVG is smaller than line height */
        }

        footer .social-links svg {
            width: 32px; /* Desired width */
            height: 32px; /* Desired height */
            max-width: 100%; /* Ensure it doesn't overflow its 'a' tag if 'a' is constrained */
            max-height: 100%;
            fill: var(--theme-footer-icon-fill); /* Ensure it uses the theme variable */
        }

        footer .social-links a:hover svg {
            fill: var(--theme-accent-color); /* Standard hover effect */
        }

    /* If the issue is very specific to _Layout.cshtml's footer structure vs _Layout2/3's footer,
       and they behave differently despite similar class names, we might need a more specific selector.
       However, the above should target any footer using this .social-links structure.
       The previous dark theme implementation already had:
       body.grotem-body footer.bg-gray-800 .social-links a svg {
           fill: var(--theme-footer-icon-fill);
       }
       body.grotem-body footer.bg-gray-800 .social-links a:hover svg {
           fill: var(--theme-accent-color);
       }
       The new rules above are more generic for `footer .social-links svg` and should
       not conflict but rather complement by adding size constraints.
    */
    /* --- Readability Fix for .service-details in Light Theme --- */

    /* Ensure the base .service-details uses the main card background and text color by default */
    /* This rule was already present, but re-confirming its variable usage. */
    .service-details {
        background-color: var(--theme-card-bg-color);
        color: var(--theme-text-color);
        /* other properties like padding, border-top, etc., should remain as previously defined */
    }

        /* Explicitly set text colors for elements within .service-details to ensure they inherit correctly */
        /* This is redundant if the parent .service-details already sets var(--theme-text-color)
   and these elements are standard block elements without overriding classes.
   However, it acts as a safeguard. */
        .service-details h4,
        .service-details p,
        .service-details ul,
        .service-details li {
            color: var(--theme-text-color);
        }

        /* Links within service-details should use accent color */
        /* This was also likely covered, but explicit check. */
        .service-details a {
            color: var(--theme-accent-color);
        }

            .service-details a:hover {
                color: var(--theme-accent-hover-color);
            }

    /*
  The following rules with `body:not(.theme-dark)` are aggressive overrides.
  They are intended to ensure that IF there are conflicting Tailwind classes
  (e.g., `text-white`) directly on elements INSIDE `.service-details` in the CSHTML,
  these CSS rules will force the light theme's text readability.
  Ideally, such conflicting classes in CSHTML should be removed.
*/

    body:not(.theme-dark) .service-details {
        background-color: #FFFFFF; /* Force a very light background for light theme */
        /* border-top: 1px solid var(--theme-border-color, #DEE2E6); /* Border is already defined */
        color: #212529; /* Force dark text for light theme */
    }

        body:not(.theme-dark) .service-details h4,
        body:not(.theme-dark) .service-details p,
        body:not(.theme-dark) .service-details ul,
        body:not(.theme-dark) .service-details li {
            color: #212529 !important; /* Force dark text, overriding potential Tailwind classes */
        }

        body:not(.theme-dark) .service-details a {
            color: var(--theme-accent-color, #00BFA5) !important; /* Force accent color for links */
        }

            body:not(.theme-dark) .service-details a:hover {
                color: var(--theme-accent-hover-color, #008c7a) !important;
            }

    /* --- Icon Animations --- */

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes vibrate {
        0% {
            transform: translate(0);
        }

        20% {
            transform: translate(-1px, 1px) rotate(-1deg);
        }

        40% {
            transform: translate(-1px, -1px) rotate(-1deg);
        }

        60% {
            transform: translate(1px, 1px) rotate(1deg);
        }

        80% {
            transform: translate(1px, -1px) rotate(1deg);
        }

        100% {
            transform: translate(0) rotate(0);
        }
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
            opacity: 0.7; /* Match base icon opacity */
        }

        50% {
            transform: scale(1.1);
            opacity: 1;
        }

        100% {
            transform: scale(1);
            opacity: 0.7; /* Match base icon opacity */
        }
    }

    @keyframes wiggle {
        0%, 100% {
            transform: rotate(0deg);
        }

        25% {
            transform: rotate(5deg);
        }

        75% {
            transform: rotate(-5deg);
        }
    }

    /* Apply Animations to Service Card Icons on Hover */

    .service-card:hover[data-icon=""]::before { /* Gear (Software Development) */
        animation: spin 2s linear infinite;
    }

    .service-card:hover[data-icon=""]::before { /* Phone (Telephony) xf095 */
        animation: vibrate 0.5s linear infinite;
    }

    .service-card:hover[data-icon=""]::before { /* Chart (Performance Optimization) xf135 */
        animation: pulse 1.5s ease-in-out infinite;
    }

    .service-card:hover[data-icon=""]::before { /* Users (Network Setup) xf233 */
        animation: pulse 1.5s ease-in-out infinite;
    }

    .service-card:hover[data-icon=""]::before { /* Globe (Web Solutions) xf0ac */
        animation: pulse 1.8s ease-in-out infinite;
    }

    .service-card:hover[data-icon=""]::before { /* Wrench (Remote Support) xf0ad */
        animation: wiggle 1s ease-in-out infinite;
    }

    @keyframes social-panel-pulse {
        0% {
            transform: scale(0.7);
            opacity: 0.5;
        }

        50% {
            transform: scale(1);
            opacity: 0.8;
        }

        100% {
            transform: scale(0.7);
            opacity: 0.5;
        }
    }

    /* --- Banner Text Restyling (Attempt) --- */
    #banner-text { /* This is an h2 */
        font-size: 3.5rem !important; /* .display-4 typically is this or larger */
        color: #FFFFFF !important; /* Banner text is usually white */
        font-weight: 300; /* .display-4 often lighter, but h1/h2 are bold by default */
        line-height: 1.2;
    }

    #banner-subtext { /* This is a p */
        font-size: 2rem !important; /* 32px is approx 2rem if base is 16px */
        color: #FFFFFF !important;
    }

    /* Explicit fix for tooltip colors in Light Theme on Support Page */
    body:not(.theme-dark) .tooltip-popup {
        background-color: #080808; /* Explicitly black background for light theme */
        color: #FFFFFF; /* Explicitly white text */
    }

        body:not(.theme-dark) .tooltip-popup::after {
            border-color: #080808 transparent transparent transparent; /* Ensure triangle matches explicit black background */
        }

    /* Explicit fix for tooltip colors in Dark Theme on Support Page */
    body.theme-dark .tooltip-popup {
        background-color: var(--theme-card-bg-color); /* Use a dark card background color */
        color: #FFFFFF; /* Ensure text is white (it's already white by default, but this reinforces) */
    }

        body.theme-dark .tooltip-popup::after {
            border-color: var(--theme-card-bg-color) transparent transparent transparent; /* Ensure triangle matches the new background */
        }

    /* Light theme override for social media icons inside the side popup panel */
    body:not(.theme-dark) .social-panel-icon-link svg {
        fill: #FFFFFF !important; /* White icons in light theme */
    }

    /* iOS-style Toggle Switch */
    .ios-toggle {
        display: inline-block;
        position: relative;
        width: 52px; /* Adjusted width */
        height: 32px; /* Adjusted height */
        cursor: pointer;
        user-select: none;
        vertical-align: middle; /* Align with text if needed */
    }

        .ios-toggle input[type="checkbox"] {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }

    .ios-toggle-track {
        display: flex; /* Using flex to center thumb vertically if needed */
        align-items: center;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--theme-form-border-color, #CED4DA); /* Default track color (off state) */
        border-radius: 16px; /* height / 2 */
        transition: background-color 0.3s ease;
    }

    .ios-toggle-thumb {
        position: absolute;
        left: 3px; /* Initial position for 'off' state */
        width: 26px; /* Thumb size */
        height: 26px; /* Thumb size */
        background-color: var(--theme-bg-color, #FFFFFF); /* Thumb color */
        border-radius: 50%;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        transition: transform 0.3s ease;
        transform: translateX(0); /* Explicitly set initial transform */
    }

    /* Light Theme 'Off' State (Default) */
    :root .ios-toggle input[type="checkbox"]:not(:checked) + .ios-toggle-track {
        background-color: #E9E9EA; /* iOS light mode off-track color */
    }

    :root .ios-toggle input[type="checkbox"]:not(:checked) .ios-toggle-thumb {
        background-color: #FFFFFF;
        border: 0.5px solid rgba(0,0,0,0.04);
        box-shadow: 0px 3px 8px rgba(0,0,0,0.15), 0px 3px 1px rgba(0,0,0,0.06);
    }

    /* Dark Theme 'Off' State */
    .theme-dark .ios-toggle input[type="checkbox"]:not(:checked) + .ios-toggle-track {
        background-color: #39393D; /* iOS dark mode off-track color */
    }

    .theme-dark .ios-toggle input[type="checkbox"]:not(:checked) .ios-toggle-thumb {
        background-color: #6B6B6B; /* Adjusted for visibility on dark track */
        border: none;
        box-shadow: 0px 3px 8px rgba(0,0,0,0.3), 0px 3px 1px rgba(0,0,0,0.12);
    }


    /* 'On' State (checkbox is checked) */
    .ios-toggle input[type="checkbox"]:checked + .ios-toggle-track {
        background-color: #34C759; /* iOS 'on' color (green) */
    }

    /* Light Theme 'On' State Thumb */
    :root .ios-toggle input[type="checkbox"]:checked + .ios-toggle-track .ios-toggle-thumb {
        transform: translateX(19px); /* (width - thumb_width - 2*padding_thumb) = 52 - 26 - 2*3 = 17, adjusted to 19 for visual centering */
        background-color: #FFFFFF;
        border: 0.5px solid rgba(0,0,0,0.04);
        box-shadow: 0px 3px 8px rgba(0,0,0,0.15), 0px 3px 1px rgba(0,0,0,0.06);
    }

    /* Dark Theme 'On' State Thumb */
    /* Same transform, potentially different thumb color if needed, but white usually works */
    .theme-dark .ios-toggle input[type="checkbox"]:checked + .ios-toggle-track .ios-toggle-thumb {
        transform: translateX(19px);
        background-color: #FFFFFF;
        border: 0.5px solid rgba(0,0,0,0.04); /* Consistent with light theme 'on' */
        box-shadow: 0px 3px 8px rgba(0,0,0,0.15), 0px 3px 1px rgba(0,0,0,0.06);
    }


    /* Focus styles for accessibility */
    .ios-toggle input[type="checkbox"]:focus-visible + .ios-toggle-track {
        outline: 2px solid var(--theme-accent-color, #00BFA5);
        outline-offset: 2px;
    }

    .ios-toggle input[type="checkbox"]:focus:not(:focus-visible) + .ios-toggle-track {
        outline: none;
    }

    /* Adjustments for placement in header nav */
    header nav .ios-toggle {
        margin-left: 0.5rem; /* Consistent with other nav items */
        margin-right: 0.5rem;
    }

    /* iOS-style Segmented Control for Language Switcher */
    .segmented-control {
        display: inline-flex;
        border-radius: 8px; /* iOS-like rounded corners for the whole control */
        background-color: var(--theme-header-bg-color, #080808); /* Default to darkish, assuming header context */
        padding: 2px; /* Small padding to create border effect around buttons */
        overflow: hidden; /* Ensure children conform to rounded corners */
        border: 1px solid var(--theme-accent-color, #FFFFFF); /* Accent border for the control */
        vertical-align: middle; /* Align with other nav items */
    }

    .theme-light .segmented-control {
        background-color: #EFEFF4; /* Lighter background for light theme */
        border: 1px solid #D1D1D6;
    }


    .segment-button {
        padding: 6px 12px; /* Adjust padding for size */
        font-size: 0.8rem; /* Match header nav item font size */
        font-weight: 500;
        color: var(--theme-header-text-color, #FFFFFF); /* Default text color */
        background-color: transparent; /* No background by default */
        border: none;
        cursor: pointer;
        transition: background-color 0.2s ease, color 0.2s ease;
        text-align: center;
        flex-grow: 1; /* Make buttons take equal space if needed */
    }

    .theme-light .segment-button {
        color: #000000;
    }

    .theme-dark .segment-button {
        color: #FFFFFF;
    }


    /* Style for the active segment */
    .segment-button.active {
        background-color: var(--theme-accent-color, #FFFFFF); /* Active segment background */
        color: var(--theme-header-bg-color, #080808); /* Text color for active segment, contrast with accent */
        border-radius: 6px; /* Slightly smaller radius for the inner active button */
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .theme-light .segment-button.active {
        background-color: #FFFFFF; /* White active segment for light theme */
        color: #000000; /* Black text on active segment */
        box-shadow: 0 1px 2px rgba(0,0,0,0.05), 0 1px 4px rgba(0,0,0,0.05);
    }

    .theme-dark .segment-button.active {
        background-color: var(--theme-accent-color, #34C759); /* Use accent color (e.g. green) or a specific dark theme active color */
        color: var(--theme-header-bg-color, #080808); /* Ensure contrast */
    }


    /* Remove extra borders if buttons are direct children */
    .segment-button + .segment-button {
        /* No explicit border between them, the background of parent provides separation if padding is used,
       or they blend if no padding in parent and no margin on buttons.
       iOS often has a very thin divider. Let's add one. */
        margin-left: 0; /* Remove space if any, rely on visual separation */
    }

    /* Optional: thin divider for light theme if not using parent padding for separation */
    /*
.theme-light .segment-button:not(.active) + .segment-button:not(.active)::before {
    content: '';
    position: absolute;
    left: 0;
    top: 20%;
    bottom: 20%;
    width: 1px;
    background-color: #C7C7CC;
}
*/
    /* For dark theme, divider might be different or not needed if contrast is good */
    /*
.theme-dark .segment-button:not(.active) + .segment-button:not(.active)::before {
     content: '';
    position: absolute;
    left: 0;
    top: 20%;
    bottom: 20%;
    width: 1px;
    background-color: #545458;
}
*/


    /* Adjustments for placement in header nav */
    header nav .segmented-control {
        margin-left: 0.5rem;
        margin-right: 0.5rem;
    }
